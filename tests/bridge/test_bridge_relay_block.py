import brownie


def test_bridge_relayBlock_success(bridge):
    bridge.relayBlock(
        [
            "0x0D4AF3F5FFA02A56B1DEED7BC8C16732AEB8FD003C67EEF26048B314C351FAE8",  # accToGovStoresMerkleHash
            "0x68BF06D17DBF1F5870D3092E1433A99FDAF6E263EFD5F8C82C533691D87592B7",  # mainAndMintStoresMerkleHash
            "0x4F900B8B425CF85AB2A1ED2907D4830BF674703C64954847DAAEE9B81A09BA31",  # oracleIAVLStateHash
            "0x2B6A7E0F44ED9C179A47A40F93D5824189A5426D6C3F77692DE28E50E20A33DD",  # paramsStoresMerkleHash
            "0xF5E26E9E91F18051F41453B5A5FC82279C364351155CEA5564B9D61BC12BE58A",  # slashingToUpgradeStoresMerkleHash
        ],
        [
            "0x3561783E9C3BDF932A16580FC0C9CEFFEC4C509073FFF65A42871BFAB64408AE",  # versionAndChainIdHash
            3021518,  # height
            1605721438,  # timeSecond
            605059026,  # timeNanoSecond
            "0x21114E3076A55C6853B4730FB8678B5BF2314C1DF6DCE169ACEE9AECE893C60F",  # lastBlockIDAndOther
            "0xEA01CD62E714B603323A21A4A7382F8AB04788C867A0C99ADE687D00E7D5FE62",  # nextValidatorHashAndConsensusHash
            "0xAA3C7CBEFF135291E6415ECA2528FC98D263B120C67BCECD8D8CCD3253EFECC1",  # lastResultsHash
            "0x68D9EF5EB2AFAF2E36940299C8CDA2F43ACB015FC2D6CAFD2C577CA48F1B2C26",  # evidenceAndProposerHash
        ],
        [
            [
                "0xD090EF654A5C8B59EB97346EB46E601A6D57DDA9174C1E535C40485FD5A8D414",
                "0x47A7B3E582103C2B28B8D3D3C8D9B7D715D852E449711C7B91BDF9EDCB3F7ADA",
                28,
                "0x74080211CE1A2E000000000022480A20",
                "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510DAD8C69B02320F62616E642D6775616E79752D706F61",
            ],
            [
                "0x26ED90EE89D4F6B5D172904DDB82A18419E6833BFC74522416800E3A7D2E3AE0",
                "0x0C2DF3F307106861195AA41643CF6DA1F5BE195B11C74B9C90329F99B1E24CA7",
                27,
                "0x74080211CE1A2E000000000022480A20",
                "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510A9F1DCC402320F62616E642D6775616E79752D706F61",
            ],
            [
                "0x5CA760BDA037610B623B83CBF8E0F55FECA37A9A621EBAD17360E5725F8E3425",
                "0x3DF55E237CB9D1EAE87243CD4D3F5F1091B9FF2E2F16A2B083928F2B0F09C7BB",
                28,
                "0x74080211CE1A2E000000000022480A20",
                "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510A196B3C502320F62616E642D6775616E79752D706F61",
            ],
            [
                "0x37466D99BB8ED9EA462B6A7E988189224A628FFA973A05A29BB401C4C4FC9B2D",
                "0x7FD076B0E28B7E6A35CC80AD6FA688958E9F22093CE00C22D4FE67124C633B04",
                28,
                "0x74080211CE1A2E000000000022480A20",
                "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD05108BFF92C502320F62616E642D6775616E79752D706F61",
            ],
            [
                "0x99CFB8E6848F039863D98C48AC985F4AD6A27FE0B602A8735D44654DF1B06DE2",
                "0x75C7162F5ABADA35FB48460F2196E5348334E98BA05DE1236D59DB329EC2E4AA",
                27,
                "0x74080211CE1A2E000000000022480A20",
                "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD05108E8BADC302320F62616E642D6775616E79752D706F61",
            ],
            [
                "0x780733F9013D10F88A2FA936BC2789A61146749B779FB847C0F46279CA31543E",
                "0x28EB691288B02C06D29CECC3DDEA3387CB10F69AEC9F6C0A51ED39784D6675D0",
                27,
                "0x74080211CE1A2E000000000022480A20",
                "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510F0CDC5D402320F62616E642D6775616E79752D706F61",
            ],
            [
                "0x2914567728CAE2ABE2B707933AE63660C7C79786C7B897CB867B68F67AAC07A8",
                "0x04F683B20F6B043A0CA79C39DD68167869262BF262CEF1B1CE8E30B4A06B0D5D",
                27,
                "0x74080211CE1A2E000000000022480A20",
                "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510A7CEC19A02320F62616E642D6775616E79752D706F61",
            ],
        ],
    )


def test_bridge_relayBlock_insufficient_validator(bridge):
    with brownie.reverts("INSUFFICIENT_VALIDATOR_SIGNATURES"):
        tx = bridge.relayBlock(
            [
                "0x0D4AF3F5FFA02A56B1DEED7BC8C16732AEB8FD003C67EEF26048B314C351FAE8",  # accToGovStoresMerkleHash
                "0x68BF06D17DBF1F5870D3092E1433A99FDAF6E263EFD5F8C82C533691D87592B7",  # mainAndMintStoresMerkleHash
                "0x4F900B8B425CF85AB2A1ED2907D4830BF674703C64954847DAAEE9B81A09BA31",  # oracleIAVLStateHash
                "0x2B6A7E0F44ED9C179A47A40F93D5824189A5426D6C3F77692DE28E50E20A33DD",  # paramsStoresMerkleHash
                "0xF5E26E9E91F18051F41453B5A5FC82279C364351155CEA5564B9D61BC12BE58A",  # slashingToUpgradeStoresMerkleHash
            ],
            [
                "0x3561783E9C3BDF932A16580FC0C9CEFFEC4C509073FFF65A42871BFAB64408AE",  # versionAndChainIdHash
                3021518,  # height
                1605721438,  # timeSecond
                605059026,  # timeNanoSecond
                "0x21114E3076A55C6853B4730FB8678B5BF2314C1DF6DCE169ACEE9AECE893C60F",  # lastBlockIDAndOther
                "0xEA01CD62E714B603323A21A4A7382F8AB04788C867A0C99ADE687D00E7D5FE62",  # nextValidatorHashAndConsensusHash
                "0xAA3C7CBEFF135291E6415ECA2528FC98D263B120C67BCECD8D8CCD3253EFECC1",  # lastResultsHash
                "0x68D9EF5EB2AFAF2E36940299C8CDA2F43ACB015FC2D6CAFD2C577CA48F1B2C26",  # evidenceAndProposerHash
            ],
            [
                [
                    "0xD090EF654A5C8B59EB97346EB46E601A6D57DDA9174C1E535C40485FD5A8D414",
                    "0x47A7B3E582103C2B28B8D3D3C8D9B7D715D852E449711C7B91BDF9EDCB3F7ADA",
                    28,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510DAD8C69B02320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0x5CA760BDA037610B623B83CBF8E0F55FECA37A9A621EBAD17360E5725F8E3425",
                    "0x3DF55E237CB9D1EAE87243CD4D3F5F1091B9FF2E2F16A2B083928F2B0F09C7BB",
                    28,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510A196B3C502320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0x37466D99BB8ED9EA462B6A7E988189224A628FFA973A05A29BB401C4C4FC9B2D",
                    "0x7FD076B0E28B7E6A35CC80AD6FA688958E9F22093CE00C22D4FE67124C633B04",
                    28,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD05108BFF92C502320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0x2914567728CAE2ABE2B707933AE63660C7C79786C7B897CB867B68F67AAC07A8",
                    "0x04F683B20F6B043A0CA79C39DD68167869262BF262CEF1B1CE8E30B4A06B0D5D",
                    27,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510A7CEC19A02320F62616E642D6775616E79752D706F61",
                ],
            ],
        )
        assert tx.status == 0


def test_bridge_relayBlock_invalid_signature_order(bridge):
    with brownie.reverts("INVALID_SIGNATURE_SIGNER_ORDER"):
        tx = bridge.relayBlock(
            [
                "0x0D4AF3F5FFA02A56B1DEED7BC8C16732AEB8FD003C67EEF26048B314C351FAE8",  # accToGovStoresMerkleHash
                "0x68BF06D17DBF1F5870D3092E1433A99FDAF6E263EFD5F8C82C533691D87592B7",  # mainAndMintStoresMerkleHash
                "0x4F900B8B425CF85AB2A1ED2907D4830BF674703C64954847DAAEE9B81A09BA31",  # oracleIAVLStateHash
                "0x2B6A7E0F44ED9C179A47A40F93D5824189A5426D6C3F77692DE28E50E20A33DD",  # paramsStoresMerkleHash
                "0xF5E26E9E91F18051F41453B5A5FC82279C364351155CEA5564B9D61BC12BE58A",  # slashingToUpgradeStoresMerkleHash
            ],
            [
                "0x3561783E9C3BDF932A16580FC0C9CEFFEC4C509073FFF65A42871BFAB64408AE",  # versionAndChainIdHash
                3021518,  # height
                1605721438,  # timeSecond
                605059026,  # timeNanoSecond
                "0x21114E3076A55C6853B4730FB8678B5BF2314C1DF6DCE169ACEE9AECE893C60F",  # lastBlockIDAndOther
                "0xEA01CD62E714B603323A21A4A7382F8AB04788C867A0C99ADE687D00E7D5FE62",  # nextValidatorHashAndConsensusHash
                "0xAA3C7CBEFF135291E6415ECA2528FC98D263B120C67BCECD8D8CCD3253EFECC1",  # lastResultsHash
                "0x68D9EF5EB2AFAF2E36940299C8CDA2F43ACB015FC2D6CAFD2C577CA48F1B2C26",  # evidenceAndProposerHash
            ],
            [
                [
                    "0x26ED90EE89D4F6B5D172904DDB82A18419E6833BFC74522416800E3A7D2E3AE0",
                    "0x0C2DF3F307106861195AA41643CF6DA1F5BE195B11C74B9C90329F99B1E24CA7",
                    27,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510A9F1DCC402320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0xD090EF654A5C8B59EB97346EB46E601A6D57DDA9174C1E535C40485FD5A8D414",
                    "0x47A7B3E582103C2B28B8D3D3C8D9B7D715D852E449711C7B91BDF9EDCB3F7ADA",
                    28,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510DAD8C69B02320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0x5CA760BDA037610B623B83CBF8E0F55FECA37A9A621EBAD17360E5725F8E3425",
                    "0x3DF55E237CB9D1EAE87243CD4D3F5F1091B9FF2E2F16A2B083928F2B0F09C7BB",
                    28,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510A196B3C502320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0x37466D99BB8ED9EA462B6A7E988189224A628FFA973A05A29BB401C4C4FC9B2D",
                    "0x7FD076B0E28B7E6A35CC80AD6FA688958E9F22093CE00C22D4FE67124C633B04",
                    28,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD05108BFF92C502320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0x99CFB8E6848F039863D98C48AC985F4AD6A27FE0B602A8735D44654DF1B06DE2",
                    "0x75C7162F5ABADA35FB48460F2196E5348334E98BA05DE1236D59DB329EC2E4AA",
                    27,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD05108E8BADC302320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0x780733F9013D10F88A2FA936BC2789A61146749B779FB847C0F46279CA31543E",
                    "0x28EB691288B02C06D29CECC3DDEA3387CB10F69AEC9F6C0A51ED39784D6675D0",
                    27,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510F0CDC5D402320F62616E642D6775616E79752D706F61",
                ],
                [
                    "0x2914567728CAE2ABE2B707933AE63660C7C79786C7B897CB867B68F67AAC07A8",
                    "0x04F683B20F6B043A0CA79C39DD68167869262BF262CEF1B1CE8E30B4A06B0D5D",
                    27,
                    "0x74080211CE1A2E000000000022480A20",
                    "0x12240A202DC401225B681224CB8F597D157A5DE78EF4F04FE1C884595F2B18D941EBCA2010012A0C08E1BAD5FD0510A7CEC19A02320F62616E642D6775616E79752D706F61",
                ],
            ],
        )
        assert tx.status == 0
