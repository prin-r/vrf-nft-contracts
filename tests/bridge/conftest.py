import pytest
from brownie import accounts, Bridge, BridgeData, MockBridge

# Returns the POA mainnet validator set
@pytest.fixture(scope="module")
def poa_validator_set():
    return [
        ["0x4705e5935aCb7c6eb23A49b17767e01fB7D8Ab73", "1000001"],
        ["0x1c18c1Ed4ec5d1Dd39b15c26b3346Fc0b4ADb138", "1000001"],
        ["0xa704058b50414C47cb2DFf32929D0830bbcb7f39", "1000001"],
        ["0x03899178B4994a3E8EA88c69b0014FDf71c656C6", "1000001"],
        ["0xeb666C2755AaA9C7e69D6e29f57d8416938c7ee6", "1000001"],
        ["0x975E60E8544bbb2945d6630553C269c5c8E72980", "1000001"],
        ["0x53256a45877e8Cc3A868D53Dc4a4493256a01701", "1000001"],
    ]


# Returns a basic mock validator set
@pytest.fixture(scope="module")
def simple_validator_set():
    return [
        ["0x652D89a66Eb4eA55366c45b1f9ACfc8e2179E1c5", 100],
        ["0x88e1cd00710495EEB93D4f522d16bC8B87Cb00FE", 100],
        ["0xaAA22E077492CbaD414098EBD98AA8dc1C7AE8D9", 100],
        ["0xB956589b6fC5523eeD0d9eEcfF06262Ce84ff260", 100],
    ]


# Returns a valid proof from the VRF oracle script
@pytest.fixture(scope="module")
def valid_proof():
    return "000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000009C00000000000000000000000000000000000000000000000000000000000000960E6791B1E9DF4F4A5B3AD3CCB6AD2529274515432960BC832F244B57D905E2B861D12FAECD12779D0432DEE531466522F489AEE184F21B3B38ED51B3BB9FE9DDB641DA77759A0233842A8B62FCF3E451C0C7AC6E3D204404DE21266A14A3E035F2B6A7E0F44ED9C179A47A40F93D5824189A5426D6C3F77692DE28E50E20A33DD937DB20BFB8985D4FA4FC8BCD14125876EF1713697AD9FC1547D034087DA5EBC3561783E9C3BDF932A16580FC0C9CEFFEC4C509073FFF65A42871BFAB64408AE00000000000000000000000000000000000000000000000000000000002E6796000000000000000000000000000000000000000000000000000000005FB646D7000000000000000000000000000000000000000000000000000000001C6A90C4DB5E5129C1230BD91E808D1B3F60941E8935E6DD3487E23424D78D466D30C161EA01CD62E714B603323A21A4A7382F8AB04788C867A0C99ADE687D00E7D5FE626E340B9CFFB37A989CA544E6BB780A2C78901D3FB33738768511A30617AFA01D68D9EF5EB2AFAF2E36940299C8CDA2F43ACB015FC2D6CAFD2C577CA48F1B2C2600000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000A00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000004C0000000000000000000000000000000000000000000000000000000000000062044BF04ACAE759850B719B556236367437A42B7B936BF18011B5335E743CE51B26392536C3C78EF59E7C58843A303A655DECE88F3A92C285D0C9CDBB43D1D03EF000000000000000000000000000000000000000000000000000000000000001B00000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000E000000000000000000000000000000000000000000000000000000000000000107408021196672E000000000022480A2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240A20A50A2AC6663699F6CC1D34C06EB6C67D5789EA15390550885AD95E77A47CDD8B10012A0C08DA8DD9FD0510B89BE2D901320F62616E642D6775616E79752D706F61000000000000000000000000000000000000000000000000000000DBAAFD03F97A8A49D1CFB67A3DEBC019097798A0A20ED33A880E3AC6A60DFEC10B900929DD8EBF3CACEBC2229ECA55BF7ABC99BC7FDFDCF9C9CA29D155696A0A000000000000000000000000000000000000000000000000000000000000001B00000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000E000000000000000000000000000000000000000000000000000000000000000107408021196672E000000000022480A2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240A20A50A2AC6663699F6CC1D34C06EB6C67D5789EA15390550885AD95E77A47CDD8B10012A0C08DA8DD9FD0510F7C0A98402320F62616E642D6775616E79752D706F61000000000000000000000000000000000000000000000000000000510BE42A5B980B0F0A43620BE164754BD2B6FED213E17E13F392CAF8CEFE7005154D5704D31FCC706A7EB8F10DBFBD1491326E5F1B4D1429FA614CB714354D41000000000000000000000000000000000000000000000000000000000000001C00000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000E000000000000000000000000000000000000000000000000000000000000000107408021196672E000000000022480A2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240A20A50A2AC6663699F6CC1D34C06EB6C67D5789EA15390550885AD95E77A47CDD8B10012A0C08DA8DD9FD0510A5B9E8FF01320F62616E642D6775616E79752D706F61000000000000000000000000000000000000000000000000000000547B362FFB82C950383C77EBBEF565B5B47AF4D450C49971CB2E50A23B8642EC76E610EABA3240C910356E7F707116B591DCAEE68B9977601980B5D024062B09000000000000000000000000000000000000000000000000000000000000001B00000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000E000000000000000000000000000000000000000000000000000000000000000107408021196672E000000000022480A2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240A20A50A2AC6663699F6CC1D34C06EB6C67D5789EA15390550885AD95E77A47CDD8B10012A0C08DA8DD9FD0510D69FD78202320F62616E642D6775616E79752D706F610000000000000000000000000000000000000000000000000000005257E65FEC18D08E3D92B732FEB967C2E078B6837DC20CFF67A96DFF111745CC424FA63CD4649219A58AF4D80364E0AC74B4C9B04C164F628E48B1814F24F06F000000000000000000000000000000000000000000000000000000000000001B00000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000000E000000000000000000000000000000000000000000000000000000000000000107408021196672E000000000022480A2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240A20A50A2AC6663699F6CC1D34C06EB6C67D5789EA15390550885AD95E77A47CDD8B10012A0C08DA8DD9FD0510B2A4BAE001320F62616E642D6775616E79752D706F6100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012C000000000000000000000000000000000000000000000000000000000002E679600000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000266B9200000000000000000000000000000000000000000000000000000000000003A000000000000000000000000000000000000000000000000000000000000000A0000000000000000000000000000000000000000000000000000000000000000A00000000000000000000000000000000000000000000000000000000000000E000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000C62616E64636861696E2E6A730000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004E00000042307866383334636661653566363431303062656337343739393930336563623963353139333635643533386431373862303763333562616663633539663766343331000000005F824B0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000E000000000000000000000000000000000000000000000000000000000000DFA3A0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000005F9DFAC9000000000000000000000000000000000000000000000000000000005F9DFAD300000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000000C62616E64636861696E2E6A730000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004400000040CCAB8C0BC2337A2AFDCD487747BFEA7BD12B88DFE0F92ED0894621D7DCC1FB861B894F18B2FD39F2E6C6E3B01EB2EC2A7AD5AAA199D9D7F7DD9C0EB56DBA8BF30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000266B953A24CC057256A969077592A2435198110F08AC7E3501237999727F9BE014ACB10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000266B9971EB9B17C6990AB31D6829F311171CC088D2DB08AA43BA4E1718D70F6F39FAAD0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000266B9A394B0CC6AB17E4EE1764B95F1CDB6F69BCBA1C85C689621883B59E55C17441280000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000266BB4819138FE036C7E93DC855FB3FDB1DC6F2029A03923977837C26B868CD15B95040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000266BE5360C66005D9C7154907510F992B94E3133D79500E21FACC539F7A0E5B421709A0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000266BF66CA86BEE3C008AE3F63C1B4D08300AAF750ED2D3EE8C459C6CC4721562FB03720000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000266C4015F4C2368FABB5EA23BE5AFD902F0B5D718368774BD4801B61E13A2818EAF54B0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000266CA723BD9663E512F867B0E30B6B4700E532BE48FD086B7FB897732DCA02D0CBA3170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000266F28E556CDC465B8F448DD512C767D8A105AA1729FCC0F2D5632946A5C288340AFE80000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000002670ECD34838B7F6E1688DB30E82C18689019EF1F5F0EF12D0B7E722F47DFA1AF237B20000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000B0000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000026745771660015F2B31C7498E228225FA560D5FAB0CCD7E02FE50DC487AFBD8A8FAE8F0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000C00000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000267B15F3EEC708431B0EC9753529682236D7100F443F6DC9F8C3947104FEECE3838A410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D0000000000000000000000000000000000000000000000000000000000001FFF000000000000000000000000000000000000000000000000000000000026A3E975A08C9B413F3781F19AB65F51927E77C83D9B2EB2C0E68B5E5753CE9A5A6A680000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000E0000000000000000000000000000000000000000000000000000000000003FFD000000000000000000000000000000000000000000000000000000000026F5952398774747479618FBB73F0F5FED0287DFD8A5C8215242FCA8FEDACCCF7C0B210000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F0000000000000000000000000000000000000000000000000000000000007FFB00000000000000000000000000000000000000000000000000000000002799653924ED220946325D0E8243F4A1683391AD1DB839637069670C6032BCAAE3000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000FFEE000000000000000000000000000000000000000000000000000000000028DEE3110B7512B2D4193E830AE7A25006E79D154DBD64638CDB5BE7CB123E488937FE00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000001FFD900000000000000000000000000000000000000000000000000000000002B6CD82FABD3791375835FA728F59501E441C42533202CE8B89392E0EC87F6ECCB125800000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000003FFC300000000000000000000000000000000000000000000000000000000002D1ACE1FA0E1868DFFA263798A0C13217E57313CC60B95DC3656CEC7ABA4BA4CC2343000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000000000000000000000000000007006500000000000000000000000000000000000000000000000000000000002E67946B9967513DB282EEFD5F3CEEF18D3CCAE80C3F2BE497DEE85049B15DF402ACC70000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000AFE3F00000000000000000000000000000000000000000000000000000000002E679492239DAE8CC9F9DF63296CF335470D70E6BCF12729A47A3034C1B4D0669A627100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000015000000000000000000000000000000000000000000000000000000000012EC3000000000000000000000000000000000000000000000000000000000002E679493BDA9DFA50B29B2FA489A7DB77B89134BB5A308A3B4EC0EEAC33D1B4BE44CD300000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000031622400000000000000000000000000000000000000000000000000000000002E6794A9232D14D672A6ED867BF4FB5DF4A97B59A8F19B65D96FFFAC1DE12A0D7800A60000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000001700000000000000000000000000000000000000000000000000000000005ED7E700000000000000000000000000000000000000000000000000000000002E679457B362B4E1DB7F5AAED43A34138B021D44A6AE5B2B4A3B6E0439C8B1931D630E00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000072573100000000000000000000000000000000000000000000000000000000002E6795CF8B76F6F47A9BA0522608EA12431FAF04A4CEA14E2C9DB4C1764323362EABD5"


# Deploy Bridge contract with POA mainnet validator set
@pytest.fixture(scope="module")
def bridge(poa_validator_set):
    return accounts[0].deploy(Bridge, poa_validator_set)


# Deploy Bridge contract with simple validator set
@pytest.fixture(scope="module")
def simplebridge(simple_validator_set):
    return accounts[0].deploy(Bridge, simple_validator_set)


# Deploy MockBridge contract with simple validator set
@pytest.fixture(scope="module")
def mockbridge(simple_validator_set):
    return accounts[0].deploy(MockBridge, simple_validator_set)


# Deploy BridgeData contract
@pytest.fixture(scope="module")
def bridgeinfo(bridge):
    return accounts[0].deploy(BridgeData, bridge.address)


@pytest.fixture(scope="module")
def bridgeinfo_relayed(bridgeinfo, valid_proof):
    bridgeinfo.relayAndSave(valid_proof, {"from": accounts[0]})
    return bridgeinfo
